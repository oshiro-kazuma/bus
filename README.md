# ちゅらバス＠なび for iPhone
## ちゅらバス＠なびWeb版の概要
「ちゅらバス＠なび」のiPhone版  
http://www.tyura-bus.sakura.ne.jp/bus/  

ちゅらバス＠なびは、沖縄の路線バスの情報を検索できるWebサービス。具体的にできる事は以下。

- 路線の検索
- バス停の検索
- 時刻表の閲覧・検索
- バスの乗換え案内
- ゆいレールの時刻表閲覧、検索
- 観光地から付近のバス停を探す

## 具体的に目玉は？
- 路線を検索できること
  - 目の前にあるバス停、いつも利用しているバス停では何処まで行く事ができるのか？を知ることが出来る。
- 時刻表を検索できること
  - いつも使っているバス停が、何時頃にでるんだっけ？と検索できる。
- GoogleMapと連携して路線を表示出来るため、視覚的で分かりやすい。

## 乗り換えは目玉じゃないの？
- 実装が難しいんすよー＞＜
  - おいエンジニアだろ、ということで時間があるときに実装考えたい。
- 出発バス停を選択し、そのバス停から「乗り換えなしで」行く事ができるバス停を検索、という機能は実装済み。
- 乗り換えを実装するなら・・・
  - 出発バス停の路線にあるバス停をfetch
    - そのバス停が通過する路線情報をfetch
	- その路線が通るバス停をfetch
	  - そのバス停のlistの中に到着バス停は含まれているのか？を調べる
  - という処理をすれば、乗り換えロジックも実装できるようなきもするよーな、しないよーな。。
    - この場合だと乗り換え一回でいける範囲になる
	- そして徒歩で移動して乗り換えしたほうがいい場合の判断とかに対応できていない
	  - バス停idに付近バス停id的なものを結びつけてそれを上手いこと使うとか
	    - その付近バス停idはバッチ処理的な感じでたまーに更新するとか
  - もしDB問い合わせがネックで遅くなるなら・・・
    - バス停の情報なんて更新めったに掛からないので全部オンメモリにして高速にfetch！とか
    - なんかとりあえず前とおんなじクエリ投げてたらcacheしとく、とか。

## ちゅらバス＠なび for iPhoneでやりたいこと
- ちゅらバス＠なびのWeb版での基本機能の移植
- バス停名をひらがなで入力してサジェストさせる
  - いつも使うバス停の名前は覚えていると思う。
  - なにげによく使いそうな機能だと思う。
- そのバスからいけるバス停の一覧を表示させる、またバス停をGoogleMapで表示出来るようにする
- お気に入りバス停機能とか付けたい。
- お気に入り路線機能も

## そもそも路線バスを使っている人はいるのか
- 沖縄はマイカー文化
- 自分も沖縄に住んでいたときは、オートバイや車で移動していた
- どれぐらい使っている人がいるのか調べたい…
  - webアンケートフォーム
  - ぐぐる、調べる、なにか統計情報出している人とかいないんスカ。。。
  - Webでリサーチ
- ちなみにちゅらバス＠なびの反響は？
  - 意外に御反応を頂いている。
    - こちらの方など http://blog.ritou.com/article/54190655.html


## 運用するときのリスク
- 情報が古い！嘘つき！
  - 情報が腐ってしまうリスク
- ちょっとー、勝手に情報使わないでもらえます？
  - バス会社からのクレームのリスク
- あれー？前見た時と情報違うんですけどー
  - XSSとか使った表示内容の改版のリスク
- おれがつくった！おれがつくった！のリスク
  - 学校で作成しました。昨年度の先輩の引継ぎで開発しました。そして運用は先生が行なっています
  - 今のところ先生に全てを移管している様な状況、と思う。
    - 誰の著作権なんだリスク
	  - みんなのもの、ということで。

## 対策とか
- 情報が腐ってしまうリスク
  - 路線の情報が変わっている場合は、利用者からご指摘を頂きやすいようにする
    - 運用は学生の時の先生が行なっていますが、利用者からのご指摘はあるようでデータベースの反映を行なっているそうです。
  - アプリ側でも指摘を送りやすいように、リンクを設けるなどと。

## そもそも何でiPhoneで作りたいの？
- スマートフォンに対応させたほうが、AndroidでもiPhoneでも見れるという点で良くないか
- わざわざネイティブアプリで作る理由とはいかに

- 作りたいから。
  - というのは半分ウソで、半分はホント。趣味なので「作りたいから作る」でOKだと思う。
  - あと、最近HTTP連携のiPhoneアプリを作ったので知識が温かいうちに作るとサクッと作れるので。
    - 路線情報をjsonで返す作りは既存である。それをNSURLConnectionで呼んでTableViewControllerに乗っけることで路線表示の基本的な実装は終わりそう。
  - 勉強の為に、という部分が大きい。
  - NSURLConnectionを使っていたが、よさそうなライブラリを見つけたので使ってみたい。
    - R9HTTPRequest

## Json APIインターフェース仕様書
- どのurlを叩けばどのような値が返ってくるのか、今一度まとめないといけない
  - わかればiPhoneではクエリ組み立ててRequest投げる
    - とりあえずその大切なところのがiPhoneで動くところを見るだけでもテンション上がりそう…！
